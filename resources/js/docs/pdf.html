<!DOCTYPE html>

<html>
<head>
  <title>pdf.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="controller.html">
                controller.js
              </a>
            
              
              <a class="source" href="position.html">
                position.js
              </a>
            
              
              <a class="source" href="session.html">
                session.js
              </a>
            
              
              <a class="source" href="test.html">
                test.js
              </a>
            
              
              <a class="source" href="ui.html">
                ui.js
              </a>
            
              
              <a class="source" href="cluster.html">
                cluster.js
              </a>
            
              
              <a class="source" href="clustering.html">
                clustering.js
              </a>
            
              
              <a class="source" href="graph.html">
                graph.js
              </a>
            
              
              <a class="source" href="linkFactory.html">
                linkFactory.js
              </a>
            
              
              <a class="source" href="linkList.html">
                linkList.js
              </a>
            
              
              <a class="source" href="nodeFactory.html">
                nodeFactory.js
              </a>
            
              
              <a class="source" href="nodeList.html">
                nodeList.js
              </a>
            
              
              <a class="source" href="saveLink.html">
                saveLink.js
              </a>
            
              
              <a class="source" href="search.html">
                search.js
              </a>
            
              
              <a class="source" href="zoom.html">
                zoom.js
              </a>
            
              
              <a class="source" href="array.html">
                array.js
              </a>
            
              
              <a class="source" href="cookie.html">
                cookie.js
              </a>
            
              
              <a class="source" href="curry.html">
                curry.js
              </a>
            
              
              <a class="source" href="dateFormat.html">
                dateFormat.js
              </a>
            
              
              <a class="source" href="datepicker.html">
                datepicker.js
              </a>
            
              
              <a class="source" href="delay.html">
                delay.js
              </a>
            
              
              <a class="source" href="dimensions.html">
                dimensions.js
              </a>
            
              
              <a class="source" href="getRandomDate.html">
                getRandomDate.js
              </a>
            
              
              <a class="source" href="ical.html">
                ical.js
              </a>
            
              
              <a class="source" href="levenshtein.html">
                levenshtein.js
              </a>
            
              
              <a class="source" href="merge.html">
                merge.js
              </a>
            
              
              <a class="source" href="paragraphy.html">
                paragraphy.js
              </a>
            
              
              <a class="source" href="pdf.html">
                pdf.js
              </a>
            
              
              <a class="source" href="screen.html">
                screen.js
              </a>
            
              
              <a class="source" href="truncate.html">
                truncate.js
              </a>
            
              
              <a class="source" href="unixTime.html">
                unixTime.js
              </a>
            
              
              <a class="source" href="graph.html">
                graph.js
              </a>
            
              
              <a class="source" href="infobox.html">
                infobox.js
              </a>
            
              
              <a class="source" href="links.html">
                links.js
              </a>
            
              
              <a class="source" href="loader.html">
                loader.js
              </a>
            
              
              <a class="source" href="map.html">
                map.js
              </a>
            
              
              <a class="source" href="menu.html">
                menu.js
              </a>
            
              
              <a class="source" href="message.html">
                message.js
              </a>
            
              
              <a class="source" href="saveLink.html">
                saveLink.js
              </a>
            
              
              <a class="source" href="search.html">
                search.js
              </a>
            
              
              <a class="source" href="selectBox.html">
                selectBox.js
              </a>
            
              
              <a class="source" href="sidebar.html">
                sidebar.js
              </a>
            
              
              <a class="source" href="views.html">
                views.js
              </a>
            
              
              <a class="source" href="zoomer.html">
                zoomer.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>pdf.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define([<span class="string">"jquery"</span>, <span class="string">"lib/jquery-class"</span>, <span class="string">"js!lib/jspdf.js!order"</span>, <span class="string">'params'</span>, <span class="string">'util/dateFormat'</span>, <span class="string">'util/paragraphy'</span>], <span class="keyword">function</span>($, Class, jspdf, config, dateFormat, paragraphy) {

	<span class="keyword">var</span> MAX_PAGE_POS = <span class="number">275</span>; <span class="comment">// end of page is at 295 for a font of 10</span>
	<span class="keyword">var</span> yoffset = <span class="number">90</span>;

	<span class="keyword">var</span> with_summary = <span class="literal">true</span>;

	<span class="keyword">var</span> Pdf = Class.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>//////////////////////////////////////////////
                                        //
               Variables                    //
                                        //
//////////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  doc: <span class="literal">null</span>,
	  day:  <span class="keyword">new</span> Array(),</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>///////////////////////////////////////////
                                     //
              Constructor                 //
                                     //
///////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  init: <span class="keyword">function</span>(nodes, incl_sum){</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Include summary?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  	<span class="keyword">if</span>(incl_sum != <span class="literal">null</span>) with_summary = incl_sum;


	    <span class="keyword">this</span>.doc = <span class="keyword">new</span> jsPDF();
	    
	    <span class="keyword">this</span>.doc.pos = <span class="number">0</span>;

	    <span class="keyword">this</span>.doc.nb_page = <span class="number">1</span>;
	    
	    <span class="comment">/* Add metadata: */</span>
	    <span class="keyword">this</span>.doc.setProperties({
	    	title: <span class="string">'Title'</span>,
	    	subject: <span class="string">'This is the subject'</span>,		
	    	author: <span class="string">'Rudiger Urbanke, Jonas Arnfred, Yannik Messerli'</span>,
	    	keywords: <span class="string">'papers'</span>,
	    	creator: <span class="string">'jsPDF'</span>
	    });</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>this.doc.setFont(&quot;helvetica&quot;); // Ok let&#39;s do it in Helvetica ;-)</p>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>create front page:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="keyword">this</span>.makeFrontPage(<span class="keyword">this</span>.doc);

	    <span class="keyword">if</span>(!with_summary) <span class="keyword">this</span>.addPage(<span class="keyword">this</span>.doc);

	    <span class="comment">/* Find all different day: */</span>
	    nodes.forEach(<span class="keyword">function</span>(node) {
	    	<span class="keyword">var</span> d = node.getDate();
	    	<span class="keyword">var</span> dayfound = <span class="keyword">this</span>.dayExist(d)
	    	<span class="keyword">if</span>( dayfound == <span class="literal">null</span> ){
	    		<span class="keyword">this</span>.day.push( {<span class="string">'date'</span>: d, <span class="string">'nodes'</span>: [node] } ) ;
	    	}<span class="keyword">else</span> {
	    		<span class="keyword">this</span>.day[dayfound].nodes.push(node);
	    	}
	    }, <span class="keyword">this</span>);
	    
	    <span class="comment">/* Add each page for the dates*/</span>
	    <span class="keyword">this</span>.day.forEach(<span class="keyword">function</span>(day)  {
	    	<span class="keyword">this</span>.addDay( day, <span class="keyword">this</span>.doc );
	    }, <span class="keyword">this</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>///////////////////////////////////////////
                                        //
               FUNCTION                       //
                                        //
///////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	 
	 
	  send: <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>write the last page number:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  	<span class="keyword">this</span>.writePageNb(<span class="keyword">this</span>.doc);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Output on a new page URL:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  	<span class="keyword">this</span>.doc.output(<span class="string">'dataurl'</span>);
	  },
	  
	  makeFrontPage: <span class="keyword">function</span>(doc) {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Write trailhead logo:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		doc.setFontSize(<span class="number">16</span>);
	  	doc.setFontType(<span class="string">"normal"</span>);
	  	doc.text(<span class="number">20</span>, <span class="number">30</span>, <span class="string">"TRAIL"</span> );
	  	doc.setFontType(<span class="string">"bold"</span>);
	  	doc.text(<span class="number">36</span>, <span class="number">30</span>, <span class="string">"HEAD"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Put the name of the conference in big:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  	doc.setFontSize(<span class="number">24</span>);
	  	doc.setFontType(<span class="string">"normal"</span>);
	  	<span class="keyword">var</span> conf_name = config[<span class="string">'conference_name'</span>].toUpperCase().paragraphy(<span class="number">20</span>);
	  	doc.text(yoffset, <span class="number">100</span>, conf_name ); 

	  	doc.setFontSize(<span class="number">14</span>);
	  	<span class="keyword">var</span> conf_place = config[<span class="string">'conference_place'</span>].paragraphy(<span class="number">50</span>);
	  	doc.text(yoffset, <span class="number">102</span> + conf_name.length*<span class="number">7</span>,  conf_place);

		doc.setFontSize(<span class="number">11</span>);
		doc.text(yoffset, <span class="number">120</span> + conf_name.length*<span class="number">7</span> + conf_place.length*<span class="number">7</span>, (<span class="string">"Your program for "</span>+config[<span class="string">'conference_name'</span>]+<span class="string">"."</span>).paragraphy(<span class="number">50</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>write the day of generation:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  	<span class="keyword">var</span> now = <span class="keyword">new</span> Date();
	  	doc.setFontSize(<span class="number">10</span>);
	  	doc.text(yoffset-<span class="number">50</span>, <span class="number">97</span>,  <span class="string">"GENERATED ON THE"</span>);
	  	doc.setFontType(<span class="string">"bold"</span>);
	  	doc.text(yoffset-<span class="number">58</span>, <span class="number">100</span>, now.format(<span class="string">'dS "of" mmmm yyyy'</span>).toUpperCase());
	  },
	  beginDay: <span class="keyword">function</span>(d, doc){
	

	  		
	  		doc.setFontSize(<span class="number">22</span>);
	  		doc.pos += <span class="number">20</span>;
	  	    doc.setFontSize(<span class="number">16</span>);
	  	    doc.setFontType(<span class="string">"bold"</span>);
	  		doc.text(<span class="number">20</span>, doc.pos, d.date.format(<span class="string">'dddd, "the" dS "of" mmmm yyyy'</span>).toUpperCase() );
			
			doc.pos += <span class="number">10</span>;
	  },
	  addDay: <span class="keyword">function</span>(d, doc) {
	  		
	  		<span class="keyword">if</span>(with_summary) <span class="keyword">this</span>.addPage(doc);

	  		<span class="keyword">this</span>.beginDay(d, doc);
			
	  		d.nodes.forEach(<span class="keyword">function</span>(node) {
	  			
	  			<span class="keyword">if</span>( doc.pos &gt; MAX_PAGE_POS-<span class="number">20</span> ) {
	  				<span class="keyword">this</span>.addPage(doc);
	  				<span class="keyword">this</span>.beginDay(d, doc);
	  			}

		  		doc.pos += <span class="number">8</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Write the time:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		  		<span class="keyword">this</span>.writeTime(node, doc);</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Write the room</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		  		<span class="keyword">this</span>.writeRoom(node, doc);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Write the title:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="keyword">this</span>.writeTitle(node, doc)</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Write the authors:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="keyword">this</span>.writeAuthors(node, doc);
				
				<span class="keyword">if</span>(with_summary){
			  		doc.pos += <span class="number">5</span>;
			  		
			  		<span class="keyword">var</span> summary = node.getCachedAbstract().substr(<span class="number">11</span>).replace(<span class="regexp">/(\r\n|\n|\r)/gm</span>,<span class="string">""</span>).paragraphy(<span class="number">60</span>);
			  		summary.forEach(<span class="keyword">function</span>(string) {

			  			<span class="keyword">if</span>( doc.pos &gt; MAX_PAGE_POS-<span class="number">1</span> ) {
			  				<span class="keyword">this</span>.addPage(doc);
			  				<span class="keyword">this</span>.beginDay(d, doc);
			  			}
						doc.setFontType(<span class="string">"normal"</span>);
			  			doc.setFontSize(<span class="number">10</span>);
			  			doc.pos = doc.pos + <span class="number">5</span>;
			  			doc.text(yoffset, doc.pos,  string);
			  		}, <span class="keyword">this</span>);
			  	}
	  		
	  		}, <span class="keyword">this</span>);
	  		
	  	
	  },
	  writeTitle: <span class="keyword">function</span>(node, doc){

	  	doc.setFontSize(<span class="number">13</span>);
		doc.setFontType(<span class="string">"bold"</span>);
		node.title.paragraphy(<span class="number">40</span>).forEach(<span class="keyword">function</span>(title) {
			doc.pos += <span class="number">6</span>;
			doc.text(yoffset, doc.pos,  title);
		});
	  },
	  writeRoom: <span class="keyword">function</span>(node, doc){
	  		doc.pos += <span class="number">5</span>;
	  		doc.setFontSize(<span class="number">10</span>);
	  		doc.setFontType(<span class="string">"italic"</span>);
	  		doc.text(yoffset - <span class="number">40</span>, doc.pos,  node.room );
	  		doc.pos -= <span class="number">11</span>; <span class="comment">// reset</span>
	  },
	  writeTime: <span class="keyword">function</span>(node, doc){
	  		<span class="keyword">var</span> d = node.getDate();
	  		doc.pos += <span class="number">6</span>;
	  		doc.setFontSize(<span class="number">13</span>);
	  		doc.setFontType(<span class="string">"bold"</span>);
	  		doc.text(yoffset-<span class="number">40</span>, doc.pos,  d.format(<span class="string">"HH:MM TT"</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>doc.pos -= 6;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  },
	  writeAuthors: <span class="keyword">function</span>(node, doc){
	  		<span class="keyword">var</span> authors = [<span class="string">""</span>];
			<span class="keyword">var</span> i = <span class="number">0</span>;
			doc.setFontType(<span class="string">"italic"</span>);
			doc.setFontSize(<span class="number">10</span>);
			node.authors.forEach(<span class="keyword">function</span>(author) {
				<span class="keyword">if</span>( (authors[i]+author).length &lt; <span class="number">60</span> ) authors[i] =  authors[i]  == <span class="string">""</span>? authors[i]+author: authors[i]+<span class="string">", "</span>+author;
				<span class="keyword">else</span> {
					i++;
					authors[i] = author;
				}
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>doc.pos += 2;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			authors.forEach(<span class="keyword">function</span>(authorline) {
				doc.pos += <span class="number">5</span>;
				doc.text(yoffset, doc.pos,  authorline);
			});
	  },
	  addPage: <span class="keyword">function</span>(doc){</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Increment the page number</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  		doc.nb_page += <span class="number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Reset position to default:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  		doc.pos = <span class="number">0</span>;
	  		doc.addPage();</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Write header:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  		<span class="keyword">this</span>.writeHeader(doc);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>write the number of page:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  		<span class="keyword">this</span>.writePageNb(doc);

	  },
	  writePageNb: <span class="keyword">function</span>(doc){
	  		doc.setFontSize(<span class="number">11</span>);
	  		doc.setFontType(<span class="string">"normal"</span>);
	  		doc.text(<span class="number">100</span>, <span class="number">290</span>, <span class="string">"- "</span>+doc.nb_page+<span class="string">" -"</span>);
	  },
	  writeHeader: <span class="keyword">function</span>(doc){</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>add the day of generation of this pdf:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  		<span class="keyword">var</span> now = <span class="keyword">new</span> Date();
	  		doc.setFontSize(<span class="number">8</span>);
	  		doc.setFontType(<span class="string">"normal"</span>);
	  		doc.text(<span class="number">20</span>, <span class="number">12</span>, <span class="string">"GENERATED BY TRAIL"</span>);
	  		doc.setFontType(<span class="string">"bold"</span>);
	  		doc.text(<span class="number">51</span>, <span class="number">12</span>, <span class="string">"HEAD"</span>);
	  		doc.setFontType(<span class="string">"normal"</span>);
	  		doc.text(<span class="number">60</span>, <span class="number">12</span>, <span class="string">"ON THE "</span>+now.format(<span class="string">'dS "of" mmmm yyyy'</span>).toUpperCase())
	  },
	  dayExist: <span class="keyword">function</span>(newday) {
	  	<span class="keyword">var</span> e = <span class="literal">false</span>;
	  	<span class="keyword">var</span> index = <span class="literal">null</span>;
	  	<span class="keyword">this</span>.day.forEach(<span class="keyword">function</span>(day, i){
	  		<span class="keyword">if</span>( day.date.getDay() == newday.getDay()){
	  			e = <span class="literal">true</span>;
	  			index = i;
	  		}
	  	});
	  	<span class="keyword">return</span> index;
	  }
	  
	  });

	<span class="keyword">return</span> Pdf;
})</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
