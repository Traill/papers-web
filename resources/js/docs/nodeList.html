<!DOCTYPE html>

<html>
<head>
  <title>nodeList.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="controller.html">
                controller.js
              </a>
            
              
              <a class="source" href="position.html">
                position.js
              </a>
            
              
              <a class="source" href="session.html">
                session.js
              </a>
            
              
              <a class="source" href="test.html">
                test.js
              </a>
            
              
              <a class="source" href="ui.html">
                ui.js
              </a>
            
              
              <a class="source" href="cluster.html">
                cluster.js
              </a>
            
              
              <a class="source" href="clustering.html">
                clustering.js
              </a>
            
              
              <a class="source" href="graph.html">
                graph.js
              </a>
            
              
              <a class="source" href="linkFactory.html">
                linkFactory.js
              </a>
            
              
              <a class="source" href="linkList.html">
                linkList.js
              </a>
            
              
              <a class="source" href="nodeFactory.html">
                nodeFactory.js
              </a>
            
              
              <a class="source" href="nodeList.html">
                nodeList.js
              </a>
            
              
              <a class="source" href="saveLink.html">
                saveLink.js
              </a>
            
              
              <a class="source" href="search.html">
                search.js
              </a>
            
              
              <a class="source" href="zoom.html">
                zoom.js
              </a>
            
              
              <a class="source" href="array.html">
                array.js
              </a>
            
              
              <a class="source" href="cookie.html">
                cookie.js
              </a>
            
              
              <a class="source" href="curry.html">
                curry.js
              </a>
            
              
              <a class="source" href="dateFormat.html">
                dateFormat.js
              </a>
            
              
              <a class="source" href="datepicker.html">
                datepicker.js
              </a>
            
              
              <a class="source" href="delay.html">
                delay.js
              </a>
            
              
              <a class="source" href="dimensions.html">
                dimensions.js
              </a>
            
              
              <a class="source" href="getRandomDate.html">
                getRandomDate.js
              </a>
            
              
              <a class="source" href="ical.html">
                ical.js
              </a>
            
              
              <a class="source" href="levenshtein.html">
                levenshtein.js
              </a>
            
              
              <a class="source" href="merge.html">
                merge.js
              </a>
            
              
              <a class="source" href="paragraphy.html">
                paragraphy.js
              </a>
            
              
              <a class="source" href="pdf.html">
                pdf.js
              </a>
            
              
              <a class="source" href="screen.html">
                screen.js
              </a>
            
              
              <a class="source" href="truncate.html">
                truncate.js
              </a>
            
              
              <a class="source" href="unixTime.html">
                unixTime.js
              </a>
            
              
              <a class="source" href="graph.html">
                graph.js
              </a>
            
              
              <a class="source" href="infobox.html">
                infobox.js
              </a>
            
              
              <a class="source" href="links.html">
                links.js
              </a>
            
              
              <a class="source" href="loader.html">
                loader.js
              </a>
            
              
              <a class="source" href="map.html">
                map.js
              </a>
            
              
              <a class="source" href="menu.html">
                menu.js
              </a>
            
              
              <a class="source" href="message.html">
                message.js
              </a>
            
              
              <a class="source" href="saveLink.html">
                saveLink.js
              </a>
            
              
              <a class="source" href="search.html">
                search.js
              </a>
            
              
              <a class="source" href="selectBox.html">
                selectBox.js
              </a>
            
              
              <a class="source" href="sidebar.html">
                sidebar.js
              </a>
            
              
              <a class="source" href="views.html">
                views.js
              </a>
            
              
              <a class="source" href="zoomer.html">
                zoomer.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nodeList.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define([<span class="string">"ajax/nodes"</span>, <span class="string">"radio"</span>, <span class="string">"util/array"</span>, <span class="string">"util/cookie"</span>, <span class="string">"models/nodeFactory"</span>], 
	   <span class="keyword">function</span>(nodes, radio, arrrr, cookie, nodeFactory) {

<span class="comment">/* TRAILHEAD MODEL
 * ---------------------------------------------------
 *	
 *	this file contain the model for the nodeList
 *	
 *	
 *	---------------------------------------------------
 *	each node has the following information:
 *	
 *	id: the unique ID of the node
 *	links: the adjacents links
 *	domNode: the object displayed in the DOM
 *	x: position x of the node in the graph
 *	y: position y of the node in the graph
 *
 *	---------------------------------------------------
 *	And the link has the following informations:
 *	
 *	target: the node at the other end
 *	value: the link weight computed by our algorithm
 *		   curently we do not use it.
 *	domLink: a ref the object displayed in the DOM.
 *	---------------------------------------------------
 *
 *
 *	A node can be:
 *	
 * 	selected: we click on it and then we can do some
 *			  some action on it
 *
 *	scheduled: we have added it to our schedule.
 *
 *	Focused: The cursor was last over this node
 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
              Interface                    //
                                        //
////////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="keyword">var</span> nodeList = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
              Variables                    //
                                        //
////////////////////////////////////////////</p>
<p>Nodes and indices</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.nodes = <span class="keyword">new</span> Array();
	nodeList.indexMap = <span class="keyword">new</span> Object();</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
               Events                    //
                                        //
////////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.events = <span class="keyword">function</span>() {

		<span class="comment">/**
		 * Broadcast
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Broadcasts select or deselect based on the id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="keyword">var</span> toggleScheduled = <span class="keyword">function</span>(node) {
			<span class="keyword">if</span> (nodeList.isScheduled(node)) radio(<span class="string">"node:unschedule"</span>).broadcast(node);
			<span class="keyword">else</span> radio(<span class="string">"node:schedule"</span>).broadcast(node);
		}


		<span class="comment">/**
		 * Subscribe
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>On node select, make sure the node is selected in the nodeList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:select"</span>).subscribe(select);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>On node scheduled, we add it to the list of scheduled nodeList
And change its color. </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:schedule"</span>).subscribe(schedule);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>On node unscheduled, we drop it from the scheduled list
and reset the UI.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:unschedule"</span>).subscribe(unschedule);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Remove all scheduled nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:unscheduleall"</span>).subscribe(nodeList.unscheduleAll);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>On node focused, make sure the node is marked as focused in 
the nodeList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:setfocus"</span>).subscribe(setFocus);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>When some code calls toggleSelect, we check if the node is 
selected or not and call the proper event back</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"node:toggleScheduled"</span>).subscribe(toggleScheduled);
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
             Initialize                    //
                                        //
////////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	
	nodeList.init = <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The init function load the model of nodeList
It creates for each node an object with containing
all the related information</p>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Load nodeList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nodeList.nodes = nodes.map(nodeFactory.<span class="keyword">new</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Create indexMap</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nodeList.nodes.forEach(<span class="function"><span class="keyword">function</span> <span class="params">(n)</span> {</span> 
			nodeList.indexMap[n.id] = n.index; 
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Empty session first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nodeList.scheduled = <span class="keyword">new</span> Array();
		

		<span class="comment">/*  TODO: This loading should be done in 
		 *	the future by looking session
		 * 	in the DB with Play
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>nodeList.focused = nodeList.getNodeFromIndex(session.loadFocused());</p>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>TODO: save it in session and load it here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nodeList.selected = <span class="literal">null</span>;

		nodeList.stats = <span class="literal">undefined</span>;

	}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
           Public Functions                //
                                        //
////////////////////////////////////////////</p>
<p>Return list of selected nodeList (nodeList.selected only contains the 
indices, so this function is convenient for when we need to know 
more</p>
<p>Returns true if the id is selected and false if it isn&#39;t</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.isScheduled = <span class="keyword">function</span>(node) {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>console.debug(node)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="keyword">return</span> (nodeList.scheduled.indexOf(node) != -<span class="number">1</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Remove all nodes from the scheduled list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.unscheduleAll = <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Broadcast session</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nodeList.scheduled.forEach(<span class="keyword">function</span>(node) { <span class="keyword">return</span> radio(<span class="string">"node:unschedule"</span>).broadcast(node); });
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Finally this function is not a hack anymore. Returns the data 
based on an id of a node. Look in graph.js for it&#39;s companion 
&#39;getNodeFromId&#39;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getNodeFromIndex = <span class="keyword">function</span>(index) {
		<span class="keyword">return</span> nodeList.nodes[index];
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Go through all the nodes to find the nodes that have the ID.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getNodeFromID = <span class="keyword">function</span>(id) {
		<span class="keyword">var</span> index = nodeList.getIndex(id);
		<span class="keyword">return</span> nodeList.nodes[index]
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Returns the index of a node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getIndex = <span class="keyword">function</span>(id) {
		<span class="keyword">return</span> nodeList.indexMap[id];
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Get random node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getRandom = <span class="keyword">function</span>() {
		<span class="keyword">return</span> Math.ceil(Math.random()*nodeList.nodes.length)
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Get list of nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getNodes = <span class="keyword">function</span>() {
		<span class="keyword">return</span> nodeList.nodes;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Get a list of values used by the nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.getStats = <span class="keyword">function</span>() {

		<span class="keyword">if</span> (nodeList.stats == <span class="literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Collect the earliest and latest date</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			dates = nodeList.nodes.map(<span class="keyword">function</span>(n) { <span class="keyword">return</span> n.getDate(); }); 
			maxDate = dates.reduce(<span class="keyword">function</span>(d1,d2) { <span class="keyword">return</span> (d1 &gt; d2) ? d1 : d2; });
			minDate = dates.reduce(<span class="keyword">function</span>(d1,d2) { <span class="keyword">return</span> (d1 &lt; d2) ? d1 : d2; });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Collect all room types</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			rooms = nodeList.nodes.map(<span class="keyword">function</span>(n) { <span class="keyword">return</span> n.room; }).unique();

			nodeList.stats = { rooms: rooms, maxDate: maxDate, minDate: minDate };
		}

		<span class="keyword">return</span> nodeList.stats;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Function to compute the center of the graph to display the windows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.computeStat = <span class="keyword">function</span>() {
		<span class="keyword">var</span> centerx = [],
			centery = [],
			minx = <span class="number">1000</span>,
			miny = <span class="number">1000</span>,
			maxx = -<span class="number">1000</span>,
			maxy = -<span class="number">1000</span>,
			tot = <span class="number">0</span>;
		
		nodeList.getNodes().forEach(<span class="keyword">function</span>(node){
		
			tot++;
			centerx.push(node.x);
			centery.push(node.y);</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Compute the min and max point</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="keyword">if</span>(minx &gt; node.x) minx = node.x;
			<span class="keyword">if</span>(miny &gt; node.y) miny = node.y;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Compute the min and max point</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="keyword">if</span>(maxx &lt; node.x) maxx = node.x;
			<span class="keyword">if</span>(maxy &lt; node.y) maxy = node.y;
			
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>the center is the median value:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="keyword">var</span> half = Math.floor(centerx.length/<span class="number">2</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Sort table</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		centerx.sort( <span class="keyword">function</span>(a,b) {<span class="keyword">return</span> a - b;} );
		centery.sort( <span class="keyword">function</span>(a,b) {<span class="keyword">return</span> a - b;} );




		<span class="keyword">return</span> { <span class="string">"center"</span>	: [ centerx[half], centery[half] ],
				 <span class="string">"min"</span> 		: [minx, miny],
				 <span class="string">"max"</span>		: [maxx, maxy]
				};
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>////////////////////////////////////////////
                                        //
          Private Functions                //
                                        //
////////////////////////////////////////////</p>
<p>Adds a new node to the list of selected nodeList, but only if it 
isn&#39;t already in the list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="keyword">var</span> schedule = <span class="keyword">function</span>(node) {</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Check if id doesn&#39;t already exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="keyword">if</span> (!nodeList.isScheduled(node)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Load all the abstract:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			node.getAbstract();</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Add new item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			nodeList.scheduled.push(node);</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Add a class name:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			node.domNode.classed(<span class="string">'scheduled'</span>, <span class="literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Save changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			radio(<span class="string">"save:nodes"</span>).broadcast(nodeList);
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Removes the id from the list of selected nodeList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="keyword">var</span> unschedule = <span class="keyword">function</span>(node) {
		nodeList.scheduled = nodeList.scheduled.filter(<span class="keyword">function</span>(n) { <span class="keyword">return</span> (n != node); });
		node.domNode.classed(<span class="string">'scheduled'</span>, <span class="literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Save changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		radio(<span class="string">"save:nodes"</span>).broadcast(nodeList);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Load the last focused node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="keyword">var</span> setFocus = <span class="keyword">function</span>(node) {
		nodeList.focused = node;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Select a node (when it is clicked)
var select = function(node) {
    nodeList.selected = node;
}</p>
<p>////////////////////////////////////////////
                                        //
           Return Interface                //
                                        //
////////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	nodeList.init();
	nodeList.events();
	<span class="keyword">return</span> nodeList;
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
